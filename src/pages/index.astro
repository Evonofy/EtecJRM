---
import Layout from "@/layouts/Layout.astro"
import { Image } from "@astrojs/image/components"

import Hero from "@/components/Hero.astro"
import Section from "@/components/Section.astro"
import Marquee from "@/components/Marquee.astro"

import { slugify } from "@/slug"

import slider1 from "@/images/slider/1.jpg"

import partner1 from "@/images/partners/1.png"
import partner2 from "@/images/partners/2.png"
import partner3 from "@/images/partners/3.png"
import partner4 from "@/images/partners/4.png"
import partner5 from "@/images/partners/5.png"
import partner6 from "@/images/partners/6.png"
import partner7 from "@/images/partners/7.png"
import partner8 from "@/images/partners/8.png"

import map from "@/images/map.png"

import user from "@/images/icons/user.svg"
import mail from "@/images/icons/mail.svg"
import building from "@/images/building.png"
import Input from "@/components/Form/Input.astro"

const half = <TArray extends any>(array: TArray[]) => [
  array.slice(0, array.length / 2 - 1) as TArray[],
  array.slice(array.length / 2, -1) as TArray[],
]

const [partners1, partners2] = half([
  partner1,
  partner2,
  partner3,
  partner4,
  partner5,
  partner6,
  partner7,
  partner8,
])

type Course = {
  name: string
  type: "etim" | "standalone"
  description: string
  slug: string
}

const courses: Course[] = (
  [
    {
      name: "Informática para Internet",
      type: "etim",
      description:
        "Aprenda tudo sobre o mundo da tecnologia e saia preparado para o mercado de trabalho.",
    },
    {
      name: "Marketing",
      type: "etim",
      description:
        "Aprenda as últimas tendências de marketing, gatilhos mentais, publicidade e propaganda.",
    },
    {
      name: "Comunicação Visual",
      type: "etim",
      description: "Se comunique visualmente.",
    },
    {
      name: "Jogos Digitais",
      type: "etim",
      description:
        "Aprenda a utilizar de ferramentas como Unity, GameMaker para criar jogos 2D e 3D.",
    },
    {
      name: "Técnico Em Multimídia",
      type: "standalone",
      description:
        "O técnico em multimídia trabalha com comunicação visual em meios eletrônicos e prepara arquivos digitais para sistemas de comunicação.",
    },
    {
      name: "Técnico em Produção de Áudio e Vídeo",
      type: "standalone",
      description:
        "O técnico em produção de áudio e vídeo capta imagem e som, prepara material audiovisual e colabora na utilização de novas tecnologias.",
    },
  ] as const
).map((course) => ({ ...course, slug: slugify(course.name) }))

import project1 from "@/images/projects/1.png"
import project2 from "@/images/projects/2.png"

const projects = [
  {
    name: "NeoExpertise",
    description:
      "E-commerce completo desenvolvido por um grupo de alunos do curso de Informática para a Internet",
    imageURL: project1,
  },
  {
    name: "Filmagem de Longa Metragem",
    description:
      "Alunos do curso de Multímida participam das filmagens de um longa metragem da Twin Filmes.",
    imageURL: project2,
  },
]
---

<Layout
  title="Top 10 Melhor Escola Para se Estudar do Estado de São Paulo | ETEC JRM"
>
  <Hero />

  <Image
    src={slider1}
    alt="Imagem"
    width={375}
    height={180}
    fetchpriority={"high"}
    loading={"eager"}
  />

  <Section background="bg-red-50 border-b border-primary-dark">
    <header class="flex flex-col gap-2">
      <h2 class="text-primary-dark">📚 Cursos Técnicos - ETIM</h2>
      <p class="text-primary-darkest">
        Confira todos os cursos integrados ao ensino médio da Etec Jornalista
        Roberto Marinho
      </p>
    </header>

    <div class="swiper mySwiper flex w-full flex-col gap-6">
      <div class="swiper-wrapper">
        {
          courses
            .filter((course) => course.type === "etim")
            .map((course) => (
              <li class="swiper-slide flex !h-auto flex-col items-start justify-between gap-3 rounded bg-red-100 p-6">
                <h3 class="text-primary-dark">{course.name}</h3>

                <p class="text-left text-slate-600">{course.description}</p>

                <a
                  class="font-bold text-slate-700 transition-colors hover:text-slate-900"
                  href={`/curso/${course.slug}`}
                >
                  Ver Mais
                </a>
              </li>
            ))
        }
      </div>

      <div class="swiper-pagination !static"></div>
    </div>
  </Section>

  <Section background="bg-slate-50">
    <header class="flex flex-col gap-2">
      <h2 class="text-center">📚 Cursos Técnicos</h2>
      <p class="text-center text-primary-darkest">
        Confira todos os cursos técnicos vigentes aqui na ETEC JRM.
      </p>
    </header>

    <div class="swiper courses-swiper flex w-full flex-col gap-6">
      <div class="swiper-wrapper">
        {
          courses
            .filter((course) => course.type === "standalone")
            .map((course) => (
              <li class="swiper-slide flex !h-auto flex-col items-start justify-between gap-3 rounded bg-red-100 p-6">
                <h3 class="text-accent-dark">{course.name}</h3>

                <p class="text-slate-600">{course.description}</p>

                <a
                  class="font-bold text-slate-700 transition-colors hover:text-slate-900"
                  href={`/curso/${course.slug}`}
                >
                  Ver Mais
                </a>
              </li>
            ))
        }
      </div>

      <div class="swiper-pagination2 !static flex items-center justify-center">
      </div>
    </div>
  </Section>

  <Section background="bg-orange-50">
    <header class="flex flex-col gap-2">
      <h2 class="text-accent-dark">Sobre A ETEC</h2>

      <p class="text-accent-darkest">
        Fundada em 2011, a Escola Técnica Estadual Jornalista Roberto Marinho já
        formou mais de 500 alunos em diversas áreas.
      </p>
    </header>

    <div class="flex flex-col gap-3">
      <h3 class="text-slate-800">Patrocinadores e Apoiadores</h3>

      <Marquee data={partners1!} />
      <Marquee data={partners2!} reverse />
    </div>

    <a class="font-bold text-accent-darkest" href="/sobre">Ver mais</a>
  </Section>

  <Section background="bg-zin-50">
    <header class="flex flex-col gap-2">
      <h2 class="text-primary-darkest">🎨 O Melhor da ETEC</h2>
      <p>
        Veja os melhores projetos de alunos que passaram aqui pela ETEC JRM.
      </p>
    </header>

    <ul class="flex w-full flex-col gap-8">
      {
        projects.map((project) => (
          <li class="flex w-full flex-col gap-6">
            <div class="flex w-full flex-col gap-1">
              <h3>{project.name}</h3>
              <p>{project.description}</p>
            </div>

            <Image
              src={project.imageURL}
              alt="Imagem de projeto de aluno"
              width={327}
              height={327}
              fetchpriority={"low"}
              loading={"lazy"}
            />
          </li>
        ))
      }
    </ul>
  </Section>

  <Section background="bg-slate-50">
    <h2 class="text-primary-darkest">📌 Localização</h2>

    <div class="flex flex-col gap-1">
      <p>Avenida Chucri Zaidan, n° 40</p>
      <p>Brooklin Novo</p>
      <p>CEP: 04583-110</p>
    </div>

    <Image
      src={map}
      alt="Mapa da localização da ETEC"
      width={327}
      height={160}
      loading={"lazy"}
      fetchpriority={"low"}
    />
    <Image
      src={building}
      alt="Foto do prédio da ETEC"
      width={327}
      height={160}
      loading={"lazy"}
      fetchpriority={"low"}
    />

    <div class="flex items-center gap-1">
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M11 7.99996C11 8.79561 10.6839 9.55867 10.1213 10.1213C9.55871 10.6839 8.79565 11 8 11C7.20435 11 6.44129 10.6839 5.87868 10.1213C5.31607 9.55867 5 8.79561 5 7.99996C5 7.20431 5.31607 6.44125 5.87868 5.87864C6.44129 5.31603 7.20435 4.99996 8 4.99996C8.79565 4.99996 9.55871 5.31603 10.1213 5.87864C10.6839 6.44125 11 7.20431 11 7.99996ZM11 7.99996C11 9.10462 11.6713 9.99996 12.5 9.99996C13.3287 9.99996 14 9.10462 14 7.99996C14 6.61183 13.5187 5.26664 12.638 4.19361C11.7574 3.12058 10.532 2.38609 9.1705 2.11529C7.80903 1.84449 6.3958 2.05413 5.17158 2.7085C3.94736 3.36287 2.98791 4.42148 2.45671 5.70395C1.9255 6.98642 1.85541 8.4134 2.25837 9.74176C2.66133 11.0701 3.51242 12.2177 4.66661 12.9888C5.82081 13.76 7.2067 14.1072 8.58814 13.9711C9.96959 13.835 11.2611 13.2242 12.2427 12.2426M11 7.99996V5.49996"
          stroke="#F56800"
          stroke-width="1.5"
          stroke-linecap="round"></path>
      </svg>

      <p>e253dir@cps.sp.gov.br</p>
    </div>

    <div class="flex items-center gap-1">
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_3_334)">
          <path
            d="M1.5 4.5C1.5 10.0227 5.97733 14.5 11.5 14.5H13C13.3978 14.5 13.7794 14.342 14.0607 14.0607C14.342 13.7794 14.5 13.3978 14.5 13V12.0853C14.5 11.7413 14.266 11.4413 13.932 11.358L10.9833 10.6207C10.69 10.5473 10.382 10.6573 10.2013 10.8987L9.55467 11.7607C9.36667 12.0113 9.042 12.122 8.748 12.014C7.65659 11.6128 6.66544 10.9791 5.84319 10.1568C5.02094 9.33456 4.38725 8.34341 3.986 7.252C3.878 6.958 3.98867 6.63333 4.23933 6.44533L5.10133 5.79867C5.34333 5.618 5.45267 5.30933 5.37933 5.01667L4.642 2.068C4.60143 1.9058 4.50781 1.7618 4.37604 1.65889C4.24426 1.55598 4.08187 1.50006 3.91467 1.5H3C2.60218 1.5 2.22064 1.65804 1.93934 1.93934C1.65804 2.22064 1.5 2.60218 1.5 3V4.5Z"
            stroke="#F56800"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </g>
        <defs>
          <clipPath id="clip0_3_334">
            <rect width="16" height="16" fill="white"></rect>
          </clipPath>
        </defs>
      </svg>

      <p>5103-2085</p>
    </div>

    <form class="flex flex-col gap-2">
      <h2>Entre Em Contato</h2>

      <Input name="name" placeholder="Nome" leftIcon={user} />

      <Input name="email" placeholder="E-mail" leftIcon={mail} />

      <Input name="reason" placeholder="Motivo do contato" textarea />

      <button
        type="submit"
        class="rounded bg-accent-base px-6 py-3 font-bold text-slate-50 hover:bg-accent-light"
      >
        Entrar em contato
      </button>
    </form>
  </Section>
</Layout>

<style>
  .swiper-slide {
    text-align: center;
    font-size: 18px;
    background: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .swiper-slide {
    height: max-content !important;
  }

  :root {
    --swiper-pagination-bullet-size: 20px;
    --swiper-pagination-bullet-inactive-color: #646f7e;
    --swiper-theme-color: #f50047;
  }
</style>

<script defer type="module">
  import "https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"
  const desktop = window.matchMedia("(min-width: 1024px)")

  var swiper = new Swiper(".mySwiper", {
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    loop: true,
    slidesPerView: desktop.matches ? 2 : 1,
    spaceBetween: desktop.matches ? 32 : 12,
  })

  var coursesSwiper = new Swiper(".courses-swiper", {
    pagination: {
      el: ".swiper-pagination2",
      clickable: true,
    },
    loop: true,
    slidesPerView: desktop.matches ? 2 : 1,
    spaceBetween: desktop.matches ? 32 : 12,
  })

  desktop.addEventListener("change", () => {
    if (desktop.matches) {
      swiper.params.slidesPerView = 2
      coursesSwiper.params.slidesPerView = 2
    } else {
      swiper.params.slidesPerView = 1
      coursesSwiper.params.slidesPerView = 1
    }
  })
</script>
